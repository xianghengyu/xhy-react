"use strict";(self.webpackChunkxhy_react=self.webpackChunkxhy_react||[]).push([[675],{2675:function(Ct,Se,a){a.r(Se),a.d(Se,{ColumnsProps:function(){return dt},DebounceX:function(){return ze},Foo:function(){return He},Introduce:function(){return Ge},SuperForm:function(){return We},SuperTable:function(){return ot},UploadFile:function(){return Ft}});var R=a(71062),e=a(99678),$e=function(t){var h=function(b){var o;return function(){var u=!0;return o&&(clearTimeout(o),u=!1),o=setTimeout(function(){clearTimeout(o),o=!1},b),u}},g=h(t.wait||500),S=function(){g()&&t.onDebounceClick()};return(0,e.jsx)("div",{onClick:S,children:t.children})},ze=$e,Ke=function(t){return(0,e.jsx)("h4",{children:t.title})},He=Ke,we=a(66451),Me=a(89442),Ze=a(70554),Xe=function(t){return(0,e.jsx)(we.ZP,{locale:Ze.Z,children:(0,e.jsx)(Me.Z,{open:t.open||!1,onClose:t.onClose,steps:t.steps||[]})})},Ge=Xe,Ve=a(82242),v=a.n(Ve),Je=a(79800),P=a.n(Je),k=a(3609),be=a(72498),Ee=a(68905),Ne=a(66490),te=a(28084),De=a(41185),Pe=a(60994),Be=a(46676),ke=a(9914),T=a(53983),Qe=function(t){var h=k.Z.useForm(),g=P()(h,1),S=g[0],m=function(u){switch(u.dataType){case"input":return(0,e.jsx)(be.Z,{style:{width:u.width||300},placeholder:"\u8BF7\u8F93\u5165".concat(u.title)});case"boolean":return(0,e.jsx)(Ee.Z,{});case"number":return(0,e.jsx)(Ne.Z,{});case"date":return(0,e.jsx)(te.default,{style:{width:u.width||260},placeholder:"\u8BF7\u9009\u62E9".concat(u.title)});case"datetime":return(0,e.jsx)(te.default,{style:{width:u.width||300},placeholder:"\u8BF7\u9009\u62E9".concat(u.title),showTime:!0});case"time":return(0,e.jsx)(De.Z,{style:{width:u.width||260},showNow:!0});case"select":return(0,e.jsx)(Pe.default,{style:{width:u.width||260},placeholder:"\u8BF7\u9009\u62E9".concat(u.title),allowClear:!0,options:u.dataSource||[]});case"cascader":return(0,e.jsx)(Be.Z,{style:{width:u.width||260},options:u.dataSource||[],placeholder:"\u8BF7\u9009\u62E9".concat(u.title),allowClear:!0});case"tree":return(0,e.jsx)(ke.Z,{showSearch:!0,dropdownStyle:{width:u.width||260,maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9".concat(u.title),allowClear:!0,treeDefaultExpandAll:!0,treeData:u.dataSource||[]});default:return(0,e.jsx)(be.Z,{style:{width:u.width||300},placeholder:"\u8BF7\u8F93\u5165".concat(u.title)})}},b=function(u){return u.map(function(w){return(0,e.jsx)(k.Z.Item,v()(v()({name:w.dataIndex,label:w.title,valuePropName:w.dataType==="boolean"?"checked":"value",rules:[{required:w.required,message:"\u8BF7\u8F93\u5165".concat(w.title,"!")}]},w.antItemProps),{},{children:m(w)}),w.dataIndex)})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(k.Z,v()(v()({form:S,onFinish:function(u){t.onSearchBarFinish&&t.onSearchBarFinish(u)}},t.antProps),{},{children:t.type=="line"||!t.type?(0,e.jsxs)("div",{className:"form-item-list",children:[b(t.columns),(0,e.jsxs)("div",{className:"submit-btn",children:[(0,e.jsx)(T.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(T.ZP,{onClick:function(){S.resetFields(),t.onReset&&t.onReset()},children:"\u91CD\u7F6E"})]})]}):(0,e.jsxs)(e.Fragment,{children:[b(t.columns),(0,e.jsxs)("div",{className:"submit-btn-vertical",children:[(0,e.jsx)(T.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(T.ZP,{onClick:function(){S.resetFields(),t.onReset&&t.onReset()},children:"\u91CD\u7F6E"})]})]})}))})},We=Qe,Ye=a(37205),X=a.n(Ye),qe=a(7557),O=a.n(qe),_e=a(41498),ne=a.n(_e),Te=a(94166),et=a(47577),ae=a(57139),tt=a(48768),nt=a(74909),Ie=a(13080),Ae=a(54683),at=a(62995),Ue=function(C){var t=C.title,h=C.icon,g=C.myStyle,S=C.placement,m=C.onClick,b=C.action;return(0,e.jsx)(at.Z,{title:t,placement:S,mouseEnterDelay:0,color:"#ffffff",overlayInnerStyle:{color:"#000"},children:(0,e.jsx)("div",{className:b?"IconButtonAction IconButton":"IconButton",style:g||{width:40,height:40},onClick:m,children:h&&h})})},rt=a(64281),lt=a(83951),it=a(19178),Le=function(t){switch(t.dataType){case"input":return(0,e.jsx)(Ae.ZP,{allowClear:!0,style:{width:t.width||300},placeholder:"\u8BF7\u8F93\u5165".concat(t.title)});case"boolean":return(0,e.jsx)(Ee.Z,{});case"number":return(0,e.jsx)(Ne.Z,{});case"date":return(0,e.jsx)(te.default,{allowClear:!0,style:{width:t.width||260},placeholder:"\u8BF7\u9009\u62E9".concat(t.title)});case"datetime":return(0,e.jsx)(te.default,{allowClear:!0,style:{width:t.width||300},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),showTime:!0});case"time":return(0,e.jsx)(De.Z,{allowClear:!0,style:{width:t.width||260},showNow:!0});case"select":return(0,e.jsx)(Pe.default,{style:{width:t.width||260},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0,options:t.dataSource||[]});case"cascader":return(0,e.jsx)(Be.Z,{style:{width:t.width||260},options:t.dataSource||[],placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0});case"tree":return(0,e.jsx)(ke.Z,{showSearch:!0,dropdownStyle:{width:t.width||260,maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0,treeDefaultExpandAll:!0,treeData:t.dataSource||[]});default:return(0,e.jsx)(Ae.ZP,{allowClear:!0,style:{width:t.width||300},placeholder:"\u8BF7\u8F93\u5165".concat(t.title)})}},st=function(t){return t.filter(function(h){return h.search}).map(function(h){return(0,e.jsx)(k.Z.Item,{name:h.dataIndex,label:h.title,valuePropName:h.dataType==="boolean"?"checked":"value",rules:[{required:h.required,message:"\u8BF7\u8F93\u5165".concat(h.title,"!")}],children:Le(h)},h.dataIndex)})},ut=function(t){var h=k.Z.useForm(),g=P()(h,1),S=g[0],m=(0,R.useState)(!1),b=P()(m,2),o=b[0],u=b[1],w=(0,R.useState)([]),J=P()(w,2),A=J[0],K=J[1],G=(0,R.useState)("middle"),Z=P()(G,2),ie=Z[0],se=Z[1],y=k.Z.useForm(),B=P()(y,1),Q=B[0],ue=(0,R.useState)(""),oe=P()(ue,2),ce=oe[0],W=oe[1],Y=function(l){return l.key===ce},ve={showSizeChanger:!0,onChange:function(l,f){t.onPageChange&&t.onPageChange(l,f)}},xe=function(l){Q.setFieldsValue(v()({},l)),W(l.key)},pe=function(){W("")},de=function(){var x=ne()(O()().mark(function l(f){var $;return O()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,Q.validateFields();case 3:$=p.sent,t.onUpdate&&t.onUpdate($),W(""),p.next=10;break;case 8:p.prev=8,p.t0=p.catch(0);case 10:case"end":return p.stop()}},l,null,[[0,8]])}));return function(f){return x.apply(this,arguments)}}(),Fe=function(l){var f=X()(l.columns);return(l.onDelete||l.onUpdate||l.onPreview)&&f.push({title:"\u64CD\u4F5C",align:"center",key:"edit",readOnly:!0,fixed:"right",width:200,render:function(H,p){var ye=Y(p);return ye?(0,e.jsxs)("div",{className:"table-operation-btn",children:[(0,e.jsx)("div",{className:"operate-btn-item-update",onClick:function(){de(p.key)},children:"\u4FDD\u5B58"}),(0,e.jsx)(Te.Z,{title:"\u786E\u8BA4\u53D6\u6D88\u4FDD\u5B58\u5417?",onConfirm:function(){pe()},onCancel:function(){},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("div",{className:"operate-btn-item-delete",children:"\u53D6\u6D88"})})]}):(0,e.jsxs)("div",{className:"table-operation-btn",children:[l.onUpdate&&(0,e.jsx)("div",{className:"operate-btn-item-update",onClick:function(){l.openEditRow?xe(H):l.onUpdate(H)},children:"\u7F16\u8F91"}),l.onDelete&&(0,e.jsx)(Te.Z,{title:"\u786E\u8BA4\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417?",onConfirm:function(){l.onDelete(H)},onCancel:function(){},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("div",{className:"operate-btn-item-delete",children:"\u5220\u9664"})}),l.onPreview&&(0,e.jsx)("div",{className:"operate-btn-item-preview",onClick:function(){l.onPreview(H)},children:"\u8BE6\u60C5"})]})}}),f},je=function(l,f){t.onSelectChange&&t.onSelectChange(f),K(l)},Ce=function(){t.onSelectChange&&t.onSelectChange([]),K([])},ge={selectedRowKeys:A,onChange:je},V=function(l){return(0,e.jsx)("td",{children:l.editing?(0,e.jsx)(k.Z.Item,{name:l.dataIndex,style:{margin:0},rules:[{required:l.required||!1,message:"\u8BF7\u8F93\u5165".concat(l.title,"!")}],children:Le(v()(v()({},l),{},{width:"fit-content"}))}):(0,e.jsx)("div",{className:"table-cell-".concat(l.align||"center"),children:l.children})})},q=t.columns.map(function(x){return v()(v()({},x),{},{onCell:function(f){return v()(v()({record:f},x),{},{editing:Y(f)})}})}),_=function(){return(0,e.jsx)(we.ZP,{locale:Ze.Z,children:(0,e.jsxs)(et.Z,{spinning:t.loading||!1,tip:"\u52A0\u8F7D\u4E2D...",children:[!t.purTable&&(0,e.jsx)("div",{className:"form-search",children:(0,e.jsx)(k.Z,{form:S,onFinish:function(f){t.onSearchBarFinish&&t.onSearchBarFinish(f)},children:(0,e.jsxs)("div",{className:"form-item-list",children:[st(t.columns),(0,e.jsxs)("div",{className:"submit-btn",children:[(0,e.jsx)(T.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(T.ZP,{onClick:function(){S.resetFields()},children:"\u91CD\u7F6E"})]})]})})}),(0,e.jsxs)("div",{className:"active-info",children:[A.length>0&&(0,e.jsx)("div",{className:"select-info-text",children:(0,e.jsxs)("div",{className:"has-select-word",children:["\u5DF2\u9009\u4E2D ",(0,e.jsx)("span",{className:"has-select-num",children:A.length})," \u6761\u6570\u636E",(0,e.jsx)("span",{onClick:Ce,className:"clean-data",children:"\u6E05\u7A7A"})]})}),t.onAdd&&(0,e.jsx)(T.ZP,{style:{backgroundColor:"#524bff"},type:"primary",onClick:t.onAdd,children:"\u65B0\u589E\u6570\u636E"}),t.showTools&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ue,{title:o?"\u7F29\u5C0F":"\u5168\u5C4F",icon:o?(0,e.jsx)(rt.Z,{}):(0,e.jsx)(lt.Z,{}),onClick:function(){u(!o)}}),(0,e.jsx)(Ue,{title:function(){return(0,e.jsx)("div",{children:(0,e.jsx)(ae.ZP.Group,{onChange:function($){se($.target.value)},value:ie,children:(0,e.jsxs)(tt.Z,{direction:"vertical",children:[(0,e.jsx)(ae.ZP,{value:"large",children:"\u5927\u53F7"}),(0,e.jsx)(ae.ZP,{value:"middle",children:"\u4E2D\u7B49"}),(0,e.jsx)(ae.ZP,{value:"small",children:"\u5C0F\u53F7"})]})})})},placement:"bottom",icon:(0,e.jsx)(it.Z,{})})]})]}),(0,e.jsx)(k.Z,{form:Q,component:!1,children:(0,e.jsx)(nt.Z,v()({components:{body:{cell:V}},size:ie,rowSelection:t.openSelect?ge:void 0,bordered:t.bordered||!0,columns:Fe(v()(v()({},t),{},{columns:q})),dataSource:t.dataSource.map(function(l,f){return v()(v()({},l),{},{key:f})}),pagination:ve},t.antProps))})]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ie.Z,{title:!1,visible:o,footer:null,wrapClassName:"super-modal-max",closable:!1,destroyOnClose:!0,mask:!1,width:"100vw",children:_()}),!o&&(0,e.jsx)(e.Fragment,{children:_()})]})},ot=ut,ct=function(t){return(0,e.jsx)(e.Fragment,{})},dt=ct,ht=a(49677),Re=a(49323),mt=a(85378),ft=a(98372),fe=a(55752),re=a(82721),vt=a(60719),xt=re.Z.Dragger,Oe=6*1024*1024,le="http://10.45.6.112:9017/minioclient/upload",I=[],pt=function(t){var h=t.type,g=h===void 0?"normal":h,S=t.accept,m=S===void 0?"":S,b=t.listType,o=b===void 0?"text":b,u=t.fileList,w=u===void 0?[]:u,J=t.maxCount,A=J===void 0?999:J,K=t.multiple,G=t.disabled,Z=t.onChange,ie=(0,R.useState)(w||[]),se=P()(ie,2),y=se[0],B=se[1],Q=(0,R.useState)(!1),ue=P()(Q,2),oe=ue[0],ce=ue[1],W=(0,R.useState)(""),Y=P()(W,2),ve=Y[0],xe=Y[1],pe=(0,R.useState)(""),de=P()(pe,2),Fe=de[0],je=de[1],Ce=function(s){return new Promise(function(n){var r=new FileReader;r.readAsArrayBuffer(s),r.onload=function(i){n(i.target.result)}})},ge=function(){var F=ne()(O()().mark(function s(n,r){var i,c,d,E,N,ee,D,j,U,he,L;return O()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(r){M.next=2;break}return M.abrupt("return");case 2:return M.next=4,Ce(r);case 4:for(i=M.sent,c=new SparkMD5.ArrayBuffer,c.append(i),d=c.end(),E=/\.([0-9a-zA-Z]+)$/i.exec(r.name)[1],N=[],ee=Math.ceil(r.size/Oe),D=r.size/ee,j=0,U=0;U<ee;U++)he={chunk:r.slice(j,j+D),filename:"".concat(d,"_").concat(U,".").concat(E),hash:d},j+=D,N.push(he);L=y,L[n].partList=N,L[n].hash=d,L[n].stop=!1,L[n].percent=0,L[n].progressStatus="active",B(X()(L)),_(N,d,r.name,n,r.key,0);case 22:case"end":return M.stop()}},s)}));return function(n,r){return F.apply(this,arguments)}}(),V=function(s){if(s.size>Oe&&(g=="normal"&&o=="picture"||g=="normal"&&o=="dragger")){var n=y;return s.key=Date.now(),n.push(s),B(X()(n)),I=n,ge(y.length-1,s),!1}else{var r=y;return g=="normal"&&o=="picture-card"?B(s.fileList):(s.key=Date.now(),r.push(s),B(X()(r)),I=r),!0}},q=function(s){if(s.file.status=="done")if(o=="picture-card")Z&&Z(s.fileList);else{var n=y.map(function(r){return r.key==s.file.key&&(r.response=s.file.response),r});Z&&Z(n)}s.file.status=="removed"&&Z&&Z(s.fileList)},_=function(s,n,r,i,c,d){var E=[];s.forEach(function(N,ee){var D=function(){var U=new FormData;return U.append("chunk",N.chunk),U.append("filename",N.filename),U.append("hash",N.hash),new Promise(function(he,L){request("http://10.45.6.112:9017/minioclient/shardUpLoad",{method:"POST",requestType:"form",data:U}).then(function(me){he(me)}).catch(function(me){L(me)})})};E.push(D)}),x(d,E,n,r,i,c)},x=function(){var F=ne()(O()().mark(function s(n,r,i,c,d,E){var N;return O()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(n>=r.length)){D.next=5;break}return I.map(function(j){return j.key==E&&(j.progressStatus="success"),j}),B(X()(I)),l(i,c,E),D.abrupt("return");case 5:return D.next=7,r[n]();case 7:n++,I.map(function(j){return j.key==E&&(j.partNum=n,j.percent=(n/r.length*100).toFixed(2)),j}),B(X()(I)),N=I.find(function(j){return j.key==E}),N&&!N.stop&&x(n,r,i,c,d,E);case 12:case"end":return D.stop()}},s)}));return function(n,r,i,c,d,E){return F.apply(this,arguments)}}(),l=function(s,n,r){request("http://10.45.6.112:9017/minioclient/merge",{method:"POST",data:{hash:s,bucketName:"text",fileName:n}}).then(function(i){if(i.statusCode=="200"){var c=y.map(function(d){return d.key==r&&(d.response=i),d});Z&&Z(c)}}).catch(function(i){console.error(i)})},f=function(s,n){var r=y;r=r.filter(function(i){return i.key!=n}),I=r,B(r),Z&&Z(r)},$=function(s,n,r){var i=y;i=i.map(function(c){return c.key==n&&(c.stop&&_(c.partList,c.hash,c.name,0,c.key,c.partNum),c.stop=!c.stop),c}),I=i,B(i)},H=function(s,n,r,i){return(0,e.jsxs)("div",{className:"file-item",children:[(0,e.jsx)(ht.Z,{style:{color:"#757575"}}),(0,e.jsx)("div",{className:"file-item-name",children:n.name}),(0,e.jsx)(Re.Z,{onClick:function(d){f(d,n.key)},className:"file-item-delete"})]})},p=function(s,n,r,i){return(0,e.jsxs)("div",{className:"file-item2",children:[(0,e.jsx)("div",{className:"file-item2-picture",children:n.thumbUrl?(0,e.jsx)("img",{src:n.thumbUrl}):(0,e.jsx)("div",{className:"file-item2-file-name",children:(0,e.jsx)("div",{children:n.name.split(".")[n.name.split(".").length-1]})})}),(0,e.jsxs)("div",{className:"file-item-middleinfo",children:[(0,e.jsx)("div",{className:"file-item2-name",children:n.name}),n.hasOwnProperty("hash")&&(0,e.jsx)(vt.Z,{trailColor:"#fff",percent:n.percent||0,status:n.progressStatus||"active"})]}),n.hasOwnProperty("hash")&&n.percent!=100&&(0,e.jsxs)(e.Fragment,{children:[n.stop&&(0,e.jsx)(mt.Z,{onClick:function(d){$(d,n.key)},className:"file-item2-delete"}),!n.stop&&(0,e.jsx)(ft.Z,{onClick:function(d){$(d,n.key)},className:"file-item2-delete"})]}),(0,e.jsx)(Re.Z,{onClick:function(d){f(d,n.key)},className:"file-item2-delete"})]})},ye=function(s){return new Promise(function(n,r){var i=new FileReader;i.readAsDataURL(s),i.onload=function(){return n(i.result)},i.onerror=function(c){return r(c)}})},z=function(){var F=ne()(O()().mark(function s(n){return O()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!n.url&&!n.preview)){i.next=4;break}return i.next=3,ye(n.originFileObj);case 3:n.preview=i.sent;case 4:xe(n.url||n.preview),ce(!0),je(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return i.stop()}},s)}));return function(n){return F.apply(this,arguments)}}(),jt=(0,e.jsxs)("div",{children:[(0,e.jsx)(fe.Z,{style:{color:"#304EEB",fontSize:"18px"}}),(0,e.jsx)("div",{style:{marginTop:8},children:"\u4E0A\u4F20\u56FE\u7247"})]});return(0,e.jsxs)(e.Fragment,{children:[g=="dragger"&&(0,e.jsx)("div",{className:"file-upload-dragger",children:(0,e.jsx)(xt,{itemRender:p,listType:o,accept:m,name:"file",data:{bucketName:"sasac"},action:le,maxCount:A,multiple:K,disabled:G,fileList:y,beforeUpload:V,onChange:q,children:(0,e.jsxs)("div",{className:"dragger-btn",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:"\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u533A\u57DF\uFF0C\u6216"}),(0,e.jsx)("span",{className:"click-upload",children:"\u70B9\u51FB\u4E0A\u4F20"})]}),m&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",m]})]})})}),g=="normal"&&(0,e.jsxs)("div",{className:"file-upload",children:[o=="text"&&(0,e.jsxs)(re.Z,{itemRender:H,accept:m,name:"file",data:{bucketName:"sasac"},action:le,listType:o,maxCount:A,multiple:K,disabled:G,fileList:y,beforeUpload:V,onChange:q,children:[(0,e.jsx)(T.ZP,{icon:(0,e.jsx)(fe.Z,{}),children:"\u4E0A\u4F20\u6587\u4EF6"}),m&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",m]})]}),o=="picture"&&(0,e.jsxs)(re.Z,{itemRender:p,accept:m,name:"file",data:{bucketName:"sasac"},action:le,listType:o,maxCount:A,multiple:K,disabled:G,fileList:y,beforeUpload:V,children:[(0,e.jsx)(T.ZP,{icon:(0,e.jsx)(fe.Z,{}),children:"\u4E0A\u4F20\u6587\u4EF6"}),m&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",m]})]}),o=="picture-card"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(re.Z,{accept:m,name:"file",data:{bucketName:"sasac"},action:le,listType:o,maxCount:A,multiple:K,disabled:G,fileList:y,onPreview:z,beforeUpload:V,onChange:q,children:w.length>=A?null:jt}),m&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",m]}),(0,e.jsx)(Ie.Z,{visible:oe,title:Fe,footer:null,onCancel:function(){ce(!1)},children:(0,e.jsx)("img",{alt:"example",style:{width:"100%"},src:ve})})]})]})]})},Ft=pt}}]);
