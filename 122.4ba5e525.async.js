"use strict";(self.webpackChunkxhy_react=self.webpackChunkxhy_react||[]).push([[122],{39122:function(yt,ee,r){r.r(ee),r.d(ee,{ColumnsProps:function(){return Me},DebounceX:function(){return Je},Foo:function(){return we},Introduce:function(){return We},SuperForm:function(){return Ge},SuperTable:function(){return ze},UploadFile:function(){return lt}});var A=r(71062),e=r(99678),Ze=function(t){return(0,e.jsx)("h4",{children:t.title})},we=Ze,Pe=r(26801),k=r.n(Pe),Ne=r(11006),T=r.n(Ne),be=r(93923),L=r.n(be),te=r(11284),ne=r(58273),M=r(59262),re=r(43926),ae=r(87986),le=r(28755),se=r(91805),U=r(90639),Ee=r(49697),ue=r(79341),Be=r(9283),N=r(87327),X=r(63784),Te=r(39697),De=r(79511),ie=r(86096),oe=r(9962),ce=r(65670),ke=r(61388),de=function(v){var t=v.title,c=v.icon,F=v.myStyle,f=v.placement,d=v.onClick,y=v.action;return(0,e.jsx)(ke.Z,{title:t,placement:f,mouseEnterDelay:0,color:"#ffffff",overlayInnerStyle:{color:"#000"},children:(0,e.jsx)("div",{className:y?"IconButtonAction IconButton":"IconButton",style:F||{width:40,height:40},onClick:d,children:c&&c})})},Ie=r(88050),Ae=r(27139),Le=r(11186),Ue=function(t){switch(t.dataType){case"input":return(0,e.jsx)(ce.ZP,{style:{width:t.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(t.title)});case"boolean":return(0,e.jsx)(te.Z,{});case"number":return(0,e.jsx)(ne.Z,{});case"date":return(0,e.jsx)(M.default,{style:{width:t.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(t.title)});case"datetime":return(0,e.jsx)(M.default,{style:{width:t.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),showTime:!0});case"time":return(0,e.jsx)(re.Z,{style:{width:t.width||80},showNow:!0});case"select":return(0,e.jsx)(ae.default,{style:{width:t.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0,options:t.dataSource||[]});case"cascader":return(0,e.jsx)(le.Z,{style:{width:t.width||180},options:t.dataSource||[],placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0});case"tree":return(0,e.jsx)(se.Z,{showSearch:!0,dropdownStyle:{width:t.width||180,maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0,treeDefaultExpandAll:!0,treeData:t.dataSource||[]});default:return(0,e.jsx)(ce.ZP,{style:{width:t.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(t.title)})}},Re=function(t){return t.filter(function(c){return c.search}).map(function(c){return(0,e.jsx)(U.Z.Item,{name:c.dataIndex,label:c.title,valuePropName:c.dataType==="boolean"?"checked":"value",rules:[{required:c.required,message:"\u8BF7\u8F93\u5165".concat(c.title,"!")}],children:Ue(c)},c.dataIndex)})},Oe=function(t){var c=L()(t.columns);return(t.onDelete||t.onUpdate||t.onPreview)&&c.push({title:"\u64CD\u4F5C",align:"center",key:"edit",readOnly:!0,fixed:"right",width:200,render:function(f){return(0,e.jsxs)("div",{className:"table-operation-btn",children:[t.onUpdate&&(0,e.jsx)("div",{className:"operate-btn-item-update",onClick:function(){t.onUpdate(f)},children:"\u7F16\u8F91"}),t.onDelete&&(0,e.jsx)(Ee.Z,{title:"\u786E\u8BA4\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417?",onConfirm:function(){t.onDelete(f)},onCancel:function(){},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("div",{className:"operate-btn-item-delete",children:"\u5220\u9664"})}),t.onPreview&&(0,e.jsx)("div",{className:"operate-btn-item-preview",onClick:function(){t.onPreview(f)},children:"\u8BE6\u60C5"})]})}}),c},$e=function(t){var c=U.Z.useForm(),F=T()(c,1),f=F[0],d=(0,A.useState)(!1),y=T()(d,2),i=y[0],u=y[1],j=(0,A.useState)("default"),z=T()(j,2),D=z[0],O=z[1],$={showSizeChanger:!0,onChange:function(w,m){t.onPageChange&&t.onPageChange(w,m)}},C=function(){return(0,e.jsx)(ue.ZP,{locale:oe.Z,children:(0,e.jsxs)(Be.Z,{spinning:t.loading||!1,tip:"\u52A0\u8F7D\u4E2D...",children:[!t.purTable&&(0,e.jsx)("div",{className:"form-search",children:(0,e.jsx)(U.Z,{form:f,onFinish:function(m){t.onSearchBarFinish&&t.onSearchBarFinish(m)},children:(0,e.jsxs)("div",{className:"form-item-list",children:[Re(t.columns),(0,e.jsxs)("div",{className:"submit-btn",children:[(0,e.jsx)(N.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(N.ZP,{onClick:function(){f.resetFields()},children:"\u91CD\u7F6E"})]})]})})}),(0,e.jsxs)("div",{className:"active-info",children:[t.onAdd&&(0,e.jsx)(N.ZP,{style:{backgroundColor:"#524bff"},type:"primary",onClick:t.onAdd,children:"\u65B0\u589E\u6570\u636E"}),t.showTools&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(de,{title:i?"\u7F29\u5C0F":"\u5168\u5C4F",icon:i?(0,e.jsx)(Ie.Z,{}):(0,e.jsx)(Ae.Z,{}),onClick:function(){u(!i)}}),(0,e.jsx)(de,{title:function(){return(0,e.jsx)("div",{children:(0,e.jsx)(X.ZP.Group,{onChange:function(P){O(P.target.value)},value:D,children:(0,e.jsxs)(Te.Z,{direction:"vertical",children:[(0,e.jsx)(X.ZP,{value:"default",children:"\u5927\u53F7"}),(0,e.jsx)(X.ZP,{value:"middle",children:"\u4E2D\u7B49"}),(0,e.jsx)(X.ZP,{value:"small",children:"\u5C0F\u53F7"})]})})})},placement:"bottom",icon:(0,e.jsx)(Le.Z,{})})]})]}),(0,e.jsx)(De.Z,k()({size:D,bordered:t.bordered||!0,columns:Oe(t),dataSource:t.dataSource.map(function(w,m){return k()(k()({},w),{},{key:m})}),pagination:$},t.antProps))]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ie.Z,{title:!1,visible:i,footer:null,wrapClassName:"super-modal-max",closable:!1,destroyOnClose:!0,mask:!1,width:"100vw",children:C()}),!i&&(0,e.jsx)(e.Fragment,{children:C()})]})},ze=$e,He=function(t){return(0,e.jsx)(e.Fragment,{})},Me=He,he=r(59611),Xe=function(t){var c=U.Z.useForm(),F=T()(c,1),f=F[0],d=function(u){switch(u.dataType){case"input":return(0,e.jsx)(he.Z,{style:{width:u.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(u.title)});case"boolean":return(0,e.jsx)(te.Z,{});case"number":return(0,e.jsx)(ne.Z,{});case"date":return(0,e.jsx)(M.default,{style:{width:u.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(u.title)});case"datetime":return(0,e.jsx)(M.default,{style:{width:u.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(u.title),showTime:!0});case"time":return(0,e.jsx)(re.Z,{style:{width:u.width||80},showNow:!0});case"select":return(0,e.jsx)(ae.default,{style:{width:u.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(u.title),allowClear:!0,options:u.dataSource||[]});case"cascader":return(0,e.jsx)(le.Z,{style:{width:u.width||180},options:u.dataSource||[],placeholder:"\u8BF7\u9009\u62E9".concat(u.title),allowClear:!0});case"tree":return(0,e.jsx)(se.Z,{showSearch:!0,dropdownStyle:{width:u.width||180,maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9".concat(u.title),allowClear:!0,treeDefaultExpandAll:!0,treeData:u.dataSource||[]});default:return(0,e.jsx)(he.Z,{style:{width:u.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(u.title)})}},y=function(u){return u.map(function(j){return(0,e.jsx)(U.Z.Item,k()(k()({name:j.dataIndex,label:j.title,valuePropName:j.dataType==="boolean"?"checked":"value",rules:[{required:j.required,message:"\u8BF7\u8F93\u5165".concat(j.title,"!")}]},j.antItemProps),{},{children:d(j)}),j.dataIndex)})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(U.Z,k()(k()({form:f,onFinish:function(u){t.onSearchBarFinish&&t.onSearchBarFinish(u)}},t.antProps),{},{children:t.type=="line"?(0,e.jsxs)("div",{className:"form-item-list",children:[y(t.columns),(0,e.jsxs)("div",{className:"submit-btn",children:[(0,e.jsx)(N.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(N.ZP,{onClick:function(){f.resetFields(),t.onReset&&t.onReset()},children:"\u91CD\u7F6E"})]})]}):(0,e.jsxs)(e.Fragment,{children:[y(t.columns),(0,e.jsxs)("div",{className:"submit-btn-vertical",children:[(0,e.jsx)(N.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(N.ZP,{onClick:function(){f.resetFields(),t.onReset&&t.onReset()},children:"\u91CD\u7F6E"})]})]})}))})},Ge=Xe,Ve=function(t){var c=function(y){var i;return function(){var u=!0;return i&&(clearTimeout(i),u=!1),i=setTimeout(function(){clearTimeout(i),i=!1},y),u}},F=c(t.wait||500),f=function(){F()&&t.onDebounceClick()};return(0,e.jsx)("div",{onClick:f,children:t.children})},Je=Ve,Ke=r(51655),Qe=function(t){return(0,e.jsx)(ue.ZP,{locale:oe.Z,children:(0,e.jsx)(Ke.Z,{open:t.open||!1,onClose:t.onClose,steps:t.steps||[]})})},We=Qe,Ye=r(10574),R=r.n(Ye),qe=r(39343),W=r.n(qe),_e=r(58500),me=r(48525),et=r(11444),tt=r(51850),Y=r(8650),G=r(91378),nt=r(17954),rt=G.Z.Dragger,fe=6*1024*1024,V="http://10.45.6.112:9017/minioclient/upload",b=[],at=function(t){var c=t.type,F=c===void 0?"normal":c,f=t.accept,d=f===void 0?"":f,y=t.listType,i=y===void 0?"text":y,u=t.fileList,j=u===void 0?[]:u,z=t.maxCount,D=z===void 0?999:z,O=t.multiple,$=t.disabled,C=t.onChange,q=(0,A.useState)(j||[]),w=T()(q,2),m=w[0],P=w[1],st=(0,A.useState)(!1),ve=T()(st,2),ut=ve[0],xe=ve[1],it=(0,A.useState)(""),pe=T()(it,2),ot=pe[0],ct=pe[1],dt=(0,A.useState)(""),Fe=T()(dt,2),ht=Fe[0],mt=Fe[1],ft=function(s){return new Promise(function(n){var a=new FileReader;a.readAsArrayBuffer(s),a.onload=function(l){n(l.target.result)}})},vt=function(){var x=W()(R()().mark(function s(n,a){var l,o,h,g,S,H,Z,p,E,K,B;return R()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(a){I.next=2;break}return I.abrupt("return");case 2:return I.next=4,ft(a);case 4:for(l=I.sent,o=new SparkMD5.ArrayBuffer,o.append(l),h=o.end(),g=/\.([0-9a-zA-Z]+)$/i.exec(a.name)[1],S=[],H=Math.ceil(a.size/fe),Z=a.size/H,p=0,E=0;E<H;E++)K={chunk:a.slice(p,p+Z),filename:"".concat(h,"_").concat(E,".").concat(g),hash:h},p+=Z,S.push(K);B=m,B[n].partList=S,B[n].hash=h,B[n].stop=!1,B[n].percent=0,B[n].progressStatus="active",P(L()(B)),je(S,h,a.name,n,a.key,0);case 22:case"end":return I.stop()}},s)}));return function(n,a){return x.apply(this,arguments)}}(),J=function(s){if(s.size>fe&&(F=="normal"&&i=="picture"||F=="normal"&&i=="dragger")){var n=m;return s.key=Date.now(),n.push(s),P(L()(n)),b=n,vt(m.length-1,s),!1}else{var a=m;return F=="normal"&&i=="picture-card"?P(s.fileList):(s.key=Date.now(),a.push(s),P(L()(a)),b=a),!0}},_=function(s){if(s.file.status=="done")if(i=="picture-card")C&&C(s.fileList);else{var n=m.map(function(a){return a.key==s.file.key&&(a.response=s.file.response),a});C&&C(n)}s.file.status=="removed"&&C&&C(s.fileList)},je=function(s,n,a,l,o,h){var g=[];s.forEach(function(S,H){var Z=function(){var E=new FormData;return E.append("chunk",S.chunk),E.append("filename",S.filename),E.append("hash",S.hash),new Promise(function(K,B){request("http://10.45.6.112:9017/minioclient/shardUpLoad",{method:"POST",requestType:"form",data:E}).then(function(Q){K(Q)}).catch(function(Q){B(Q)})})};g.push(Z)}),Ce(h,g,n,a,l,o)},Ce=function(){var x=W()(R()().mark(function s(n,a,l,o,h,g){var S;return R()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!(n>=a.length)){Z.next=5;break}return b.map(function(p){return p.key==g&&(p.progressStatus="success"),p}),P(L()(b)),xt(l,o,g),Z.abrupt("return");case 5:return Z.next=7,a[n]();case 7:n++,b.map(function(p){return p.key==g&&(p.partNum=n,p.percent=(n/a.length*100).toFixed(2)),p}),P(L()(b)),S=b.find(function(p){return p.key==g}),S&&!S.stop&&Ce(n,a,l,o,h,g);case 12:case"end":return Z.stop()}},s)}));return function(n,a,l,o,h,g){return x.apply(this,arguments)}}(),xt=function(s,n,a){request("http://10.45.6.112:9017/minioclient/merge",{method:"POST",data:{hash:s,bucketName:"text",fileName:n}}).then(function(l){if(l.statusCode=="200"){var o=m.map(function(h){return h.key==a&&(h.response=l),h});C&&C(o)}}).catch(function(l){console.error(l)})},ye=function(s,n){var a=m;a=a.filter(function(l){return l.key!=n}),b=a,P(a),C&&C(a)},ge=function(s,n,a){var l=m;l=l.map(function(o){return o.key==n&&(o.stop&&je(o.partList,o.hash,o.name,0,o.key,o.partNum),o.stop=!o.stop),o}),b=l,P(l)},pt=function(s,n,a,l){return(0,e.jsxs)("div",{className:"file-item",children:[(0,e.jsx)(_e.Z,{style:{color:"#757575"}}),(0,e.jsx)("div",{className:"file-item-name",children:n.name}),(0,e.jsx)(me.Z,{onClick:function(h){ye(h,n.key)},className:"file-item-delete"})]})},Se=function(s,n,a,l){return(0,e.jsxs)("div",{className:"file-item2",children:[(0,e.jsx)("div",{className:"file-item2-picture",children:n.thumbUrl?(0,e.jsx)("img",{src:n.thumbUrl}):(0,e.jsx)("div",{className:"file-item2-file-name",children:(0,e.jsx)("div",{children:n.name.split(".")[n.name.split(".").length-1]})})}),(0,e.jsxs)("div",{className:"file-item-middleinfo",children:[(0,e.jsx)("div",{className:"file-item2-name",children:n.name}),n.hasOwnProperty("hash")&&(0,e.jsx)(nt.Z,{trailColor:"#fff",percent:n.percent||0,status:n.progressStatus||"active"})]}),n.hasOwnProperty("hash")&&n.percent!=100&&(0,e.jsxs)(e.Fragment,{children:[n.stop&&(0,e.jsx)(et.Z,{onClick:function(h){ge(h,n.key)},className:"file-item2-delete"}),!n.stop&&(0,e.jsx)(tt.Z,{onClick:function(h){ge(h,n.key)},className:"file-item2-delete"})]}),(0,e.jsx)(me.Z,{onClick:function(h){ye(h,n.key)},className:"file-item2-delete"})]})},Ft=function(s){return new Promise(function(n,a){var l=new FileReader;l.readAsDataURL(s),l.onload=function(){return n(l.result)},l.onerror=function(o){return a(o)}})},jt=function(){var x=W()(R()().mark(function s(n){return R()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!n.url&&!n.preview)){l.next=4;break}return l.next=3,Ft(n.originFileObj);case 3:n.preview=l.sent;case 4:ct(n.url||n.preview),xe(!0),mt(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return l.stop()}},s)}));return function(n){return x.apply(this,arguments)}}(),Ct=(0,e.jsxs)("div",{children:[(0,e.jsx)(Y.Z,{style:{color:"#304EEB",fontSize:"18px"}}),(0,e.jsx)("div",{style:{marginTop:8},children:"\u4E0A\u4F20\u56FE\u7247"})]});return(0,e.jsxs)(e.Fragment,{children:[F=="dragger"&&(0,e.jsx)("div",{className:"file-upload-dragger",children:(0,e.jsx)(rt,{itemRender:Se,listType:i,accept:d,name:"file",data:{bucketName:"sasac"},action:V,maxCount:D,multiple:O,disabled:$,fileList:m,beforeUpload:J,onChange:_,children:(0,e.jsxs)("div",{className:"dragger-btn",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:"\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u533A\u57DF\uFF0C\u6216"}),(0,e.jsx)("span",{className:"click-upload",children:"\u70B9\u51FB\u4E0A\u4F20"})]}),d&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",d]})]})})}),F=="normal"&&(0,e.jsxs)("div",{className:"file-upload",children:[i=="text"&&(0,e.jsxs)(G.Z,{itemRender:pt,accept:d,name:"file",data:{bucketName:"sasac"},action:V,listType:i,maxCount:D,multiple:O,disabled:$,fileList:m,beforeUpload:J,onChange:_,children:[(0,e.jsx)(N.ZP,{icon:(0,e.jsx)(Y.Z,{}),children:"\u4E0A\u4F20\u6587\u4EF6"}),d&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",d]})]}),i=="picture"&&(0,e.jsxs)(G.Z,{itemRender:Se,accept:d,name:"file",data:{bucketName:"sasac"},action:V,listType:i,maxCount:D,multiple:O,disabled:$,fileList:m,beforeUpload:J,children:[(0,e.jsx)(N.ZP,{icon:(0,e.jsx)(Y.Z,{}),children:"\u4E0A\u4F20\u6587\u4EF6"}),d&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",d]})]}),i=="picture-card"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{accept:d,name:"file",data:{bucketName:"sasac"},action:V,listType:i,maxCount:D,multiple:O,disabled:$,fileList:m,onPreview:jt,beforeUpload:J,onChange:_,children:j.length>=D?null:Ct}),d&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",d]}),(0,e.jsx)(ie.Z,{visible:ut,title:ht,footer:null,onCancel:function(){xe(!1)},children:(0,e.jsx)("img",{alt:"example",style:{width:"100%"},src:ot})})]})]})]})},lt=at}}]);
