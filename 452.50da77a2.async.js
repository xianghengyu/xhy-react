"use strict";(self.webpackChunkxhy_react=self.webpackChunkxhy_react||[]).push([[452],{42452:function(pt,ee,a){a.r(ee),a.d(ee,{ColumnsProps:function(){return Me},Foo:function(){return Se},SuperForm:function(){return Ve},SuperTable:function(){return ze},UploadFile:function(){return et}});var I=a(71062),e=a(99678),ge=function(t){return(0,e.jsx)("h4",{children:t.title})},Se=ge,Ze=a(26801),k=a.n(Ze),we=a(11006),b=a.n(we),Ne=a(93923),L=a.n(Ne),te=a(11284),ne=a(58273),M=a(28118),ae=a(43926),re=a(87986),le=a(28755),se=a(91805),U=a(38025),Pe=a(55076),Ee=a(79341),Be=a(24982),P=a(87327),G=a(14677),Te=a(55520),be=a(94081),ie=a(31415),De=a(9962),ue=a(65670),ke=a(91481),oe=function(x){var t=x.title,o=x.icon,F=x.myStyle,p=x.placement,c=x.onClick,Z=x.action;return(0,e.jsx)(ke.Z,{title:t,placement:p,mouseEnterDelay:0,color:"#ffffff",overlayInnerStyle:{color:"#000"},children:(0,e.jsx)("div",{className:Z?"IconButtonAction IconButton":"IconButton",style:F||{width:40,height:40},onClick:c,children:o&&o})})},Ae=a(88050),Ie=a(27139),Le=a(11186),Ue=function(t){switch(t.dataType){case"input":return(0,e.jsx)(ue.ZP,{style:{width:t.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(t.title)});case"boolean":return(0,e.jsx)(te.Z,{});case"number":return(0,e.jsx)(ne.Z,{});case"date":return(0,e.jsx)(M.default,{style:{width:t.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(t.title)});case"datetime":return(0,e.jsx)(M.default,{style:{width:t.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),showTime:!0});case"time":return(0,e.jsx)(ae.Z,{style:{width:t.width||80},showNow:!0});case"select":return(0,e.jsx)(re.Z,{style:{width:t.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0,options:t.dataSource||[]});case"cascader":return(0,e.jsx)(le.Z,{style:{width:t.width||180},options:t.dataSource||[],placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0});case"tree":return(0,e.jsx)(se.Z,{showSearch:!0,dropdownStyle:{width:t.width||180,maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9".concat(t.title),allowClear:!0,treeDefaultExpandAll:!0,treeData:t.dataSource||[]});default:return(0,e.jsx)(ue.ZP,{style:{width:t.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(t.title)})}},Re=function(t){return t.filter(function(o){return o.search}).map(function(o){return(0,e.jsx)(U.Z.Item,{name:o.dataIndex,label:o.title,valuePropName:o.dataType==="boolean"?"checked":"value",rules:[{required:o.required,message:"\u8BF7\u8F93\u5165".concat(o.title,"!")}],children:Ue(o)},o.dataIndex)})},Oe=function(t){var o=L()(t.columns);return(t.onDelete||t.onUpdate||t.onPreview)&&o.push({title:"\u64CD\u4F5C",align:"center",key:"edit",readOnly:!0,fixed:"right",width:200,render:function(p){return(0,e.jsxs)("div",{className:"table-operation-btn",children:[t.onUpdate&&(0,e.jsx)("div",{className:"operate-btn-item-update",onClick:function(){t.onUpdate(p)},children:"\u7F16\u8F91"}),t.onDelete&&(0,e.jsx)(Pe.Z,{title:"\u786E\u8BA4\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417?",onConfirm:function(){t.onDelete(p)},onCancel:function(){},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("div",{className:"operate-btn-item-delete",children:"\u5220\u9664"})}),t.onPreview&&(0,e.jsx)("div",{className:"operate-btn-item-preview",onClick:function(){t.onPreview(p)},children:"\u8BE6\u60C5"})]})}}),o},$e=function(t){var o=U.Z.useForm(),F=b()(o,1),p=F[0],c=(0,I.useState)(!1),Z=b()(c,2),d=Z[0],i=Z[1],j=(0,I.useState)("default"),z=b()(j,2),D=z[0],O=z[1],$={showSizeChanger:!0,onChange:function(w,m){t.onPageChange&&t.onPageChange(w,m)}},y=function(){return(0,e.jsx)(Ee.ZP,{locale:De.Z,children:(0,e.jsxs)(Be.Z,{spinning:t.loading||!1,tip:"\u52A0\u8F7D\u4E2D...",children:[!t.purTable&&(0,e.jsx)("div",{className:"form-search",children:(0,e.jsx)(U.Z,{form:p,onFinish:function(m){t.onSearchBarFinish&&t.onSearchBarFinish(m)},children:(0,e.jsxs)("div",{className:"form-item-list",children:[Re(t.columns),(0,e.jsxs)("div",{className:"submit-btn",children:[(0,e.jsx)(P.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(P.ZP,{onClick:function(){p.resetFields()},children:"\u91CD\u7F6E"})]})]})})}),(0,e.jsxs)("div",{className:"active-info",children:[t.onAdd&&(0,e.jsx)(P.ZP,{style:{backgroundColor:"#524bff"},type:"primary",onClick:t.onAdd,children:"\u65B0\u589E\u6570\u636E"}),t.showTools&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe,{title:d?"\u7F29\u5C0F":"\u5168\u5C4F",icon:d?(0,e.jsx)(Ae.Z,{}):(0,e.jsx)(Ie.Z,{}),onClick:function(){i(!d)}}),(0,e.jsx)(oe,{title:function(){return(0,e.jsx)("div",{children:(0,e.jsx)(G.ZP.Group,{onChange:function(N){O(N.target.value)},value:D,children:(0,e.jsxs)(Te.Z,{direction:"vertical",children:[(0,e.jsx)(G.ZP,{value:"default",children:"\u5927\u53F7"}),(0,e.jsx)(G.ZP,{value:"middle",children:"\u4E2D\u7B49"}),(0,e.jsx)(G.ZP,{value:"small",children:"\u5C0F\u53F7"})]})})})},placement:"bottom",icon:(0,e.jsx)(Le.Z,{})})]})]}),(0,e.jsx)(be.Z,k()({size:D,bordered:t.bordered||!0,columns:Oe(t),dataSource:t.dataSource.map(function(w,m){return k()(k()({},w),{},{key:m})}),pagination:$},t.antProps))]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ie.Z,{title:!1,visible:d,footer:null,wrapClassName:"super-modal-max",closable:!1,destroyOnClose:!0,mask:!1,width:"100vw",children:y()}),!d&&(0,e.jsx)(e.Fragment,{children:y()})]})},ze=$e,He=function(t){return(0,e.jsx)(e.Fragment,{})},Me=He,ce=a(11962),Ge=function(t){var o=U.Z.useForm(),F=b()(o,1),p=F[0],c=function(i){switch(i.dataType){case"input":return(0,e.jsx)(ce.Z,{style:{width:i.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(i.title)});case"boolean":return(0,e.jsx)(te.Z,{});case"number":return(0,e.jsx)(ne.Z,{});case"date":return(0,e.jsx)(M.default,{style:{width:i.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(i.title)});case"datetime":return(0,e.jsx)(M.default,{style:{width:i.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(i.title),showTime:!0});case"time":return(0,e.jsx)(ae.Z,{style:{width:i.width||80},showNow:!0});case"select":return(0,e.jsx)(re.Z,{style:{width:i.width||180},placeholder:"\u8BF7\u9009\u62E9".concat(i.title),allowClear:!0,options:i.dataSource||[]});case"cascader":return(0,e.jsx)(le.Z,{style:{width:i.width||180},options:i.dataSource||[],placeholder:"\u8BF7\u9009\u62E9".concat(i.title),allowClear:!0});case"tree":return(0,e.jsx)(se.Z,{showSearch:!0,dropdownStyle:{width:i.width||180,maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9".concat(i.title),allowClear:!0,treeDefaultExpandAll:!0,treeData:i.dataSource||[]});default:return(0,e.jsx)(ce.Z,{style:{width:i.width||180},placeholder:"\u8BF7\u8F93\u5165".concat(i.title)})}},Z=function(i){return i.map(function(j){return(0,e.jsx)(U.Z.Item,k()(k()({name:j.dataIndex,label:j.title,valuePropName:j.dataType==="boolean"?"checked":"value",rules:[{required:j.required,message:"\u8BF7\u8F93\u5165".concat(j.title,"!")}]},j.antItemProps),{},{children:c(j)}),j.dataIndex)})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(U.Z,k()(k()({form:p,onFinish:function(i){t.onSearchBarFinish&&t.onSearchBarFinish(i)}},t.antProps),{},{children:t.type=="line"?(0,e.jsxs)("div",{className:"form-item-list",children:[Z(t.columns),(0,e.jsxs)("div",{className:"submit-btn",children:[(0,e.jsx)(P.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(P.ZP,{onClick:function(){p.resetFields(),t.onReset&&t.onReset()},children:"\u91CD\u7F6E"})]})]}):(0,e.jsxs)(e.Fragment,{children:[Z(t.columns),(0,e.jsxs)("div",{className:"submit-btn-vertical",children:[(0,e.jsx)(P.ZP,{style:{backgroundColor:"#524bff"},type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"}),(0,e.jsx)(P.ZP,{onClick:function(){p.resetFields(),t.onReset&&t.onReset()},children:"\u91CD\u7F6E"})]})]})}))})},Ve=Ge,Je=a(10574),R=a.n(Je),Ke=a(39343),X=a.n(Ke),Qe=a(58500),de=a(48525),We=a(11444),Xe=a(51850),Y=a(8650),V=a(91378),Ye=a(17954),qe=V.Z.Dragger,he=6*1024*1024,J="http://10.45.6.112:9017/minioclient/upload",E=[],_e=function(t){var o=t.type,F=o===void 0?"normal":o,p=t.accept,c=p===void 0?"":p,Z=t.listType,d=Z===void 0?"text":Z,i=t.fileList,j=i===void 0?[]:i,z=t.maxCount,D=z===void 0?999:z,O=t.multiple,$=t.disabled,y=t.onChange,q=(0,I.useState)(j||[]),w=b()(q,2),m=w[0],N=w[1],tt=(0,I.useState)(!1),me=b()(tt,2),nt=me[0],fe=me[1],at=(0,I.useState)(""),ve=b()(at,2),rt=ve[0],lt=ve[1],st=(0,I.useState)(""),pe=b()(st,2),it=pe[0],ut=pe[1],ot=function(s){return new Promise(function(n){var r=new FileReader;r.readAsArrayBuffer(s),r.onload=function(l){n(l.target.result)}})},ct=function(){var f=X()(R()().mark(function s(n,r){var l,u,h,C,g,H,S,v,B,Q,T;return R()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(r){A.next=2;break}return A.abrupt("return");case 2:return A.next=4,ot(r);case 4:for(l=A.sent,u=new SparkMD5.ArrayBuffer,u.append(l),h=u.end(),C=/\.([0-9a-zA-Z]+)$/i.exec(r.name)[1],g=[],H=Math.ceil(r.size/he),S=r.size/H,v=0,B=0;B<H;B++)Q={chunk:r.slice(v,v+S),filename:"".concat(h,"_").concat(B,".").concat(C),hash:h},v+=S,g.push(Q);T=m,T[n].partList=g,T[n].hash=h,T[n].stop=!1,T[n].percent=0,T[n].progressStatus="active",N(L()(T)),xe(g,h,r.name,n,r.key,0);case 22:case"end":return A.stop()}},s)}));return function(n,r){return f.apply(this,arguments)}}(),K=function(s){if(s.size>he&&(F=="normal"&&d=="picture"||F=="normal"&&d=="dragger")){var n=m;return s.key=Date.now(),n.push(s),N(L()(n)),E=n,ct(m.length-1,s),!1}else{var r=m;return F=="normal"&&d=="picture-card"?N(s.fileList):(s.key=Date.now(),r.push(s),N(L()(r)),E=r),!0}},_=function(s){if(s.file.status=="done")if(d=="picture-card")y&&y(s.fileList);else{var n=m.map(function(r){return r.key==s.file.key&&(r.response=s.file.response),r});y&&y(n)}s.file.status=="removed"&&y&&y(s.fileList)},xe=function(s,n,r,l,u,h){var C=[];s.forEach(function(g,H){var S=function(){var B=new FormData;return B.append("chunk",g.chunk),B.append("filename",g.filename),B.append("hash",g.hash),new Promise(function(Q,T){request("http://10.45.6.112:9017/minioclient/shardUpLoad",{method:"POST",requestType:"form",data:B}).then(function(W){Q(W)}).catch(function(W){T(W)})})};C.push(S)}),Fe(h,C,n,r,l,u)},Fe=function(){var f=X()(R()().mark(function s(n,r,l,u,h,C){var g;return R()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(n>=r.length)){S.next=5;break}return E.map(function(v){return v.key==C&&(v.progressStatus="success"),v}),N(L()(E)),dt(l,u,C),S.abrupt("return");case 5:return S.next=7,r[n]();case 7:n++,E.map(function(v){return v.key==C&&(v.partNum=n,v.percent=(n/r.length*100).toFixed(2)),v}),N(L()(E)),g=E.find(function(v){return v.key==C}),g&&!g.stop&&Fe(n,r,l,u,h,C);case 12:case"end":return S.stop()}},s)}));return function(n,r,l,u,h,C){return f.apply(this,arguments)}}(),dt=function(s,n,r){request("http://10.45.6.112:9017/minioclient/merge",{method:"POST",data:{hash:s,bucketName:"text",fileName:n}}).then(function(l){if(l.statusCode=="200"){var u=m.map(function(h){return h.key==r&&(h.response=l),h});y&&y(u)}}).catch(function(l){console.error(l)})},je=function(s,n){var r=m;r=r.filter(function(l){return l.key!=n}),E=r,N(r),y&&y(r)},ye=function(s,n,r){var l=m;l=l.map(function(u){return u.key==n&&(u.stop&&xe(u.partList,u.hash,u.name,0,u.key,u.partNum),u.stop=!u.stop),u}),E=l,N(l)},ht=function(s,n,r,l){return(0,e.jsxs)("div",{className:"file-item",children:[(0,e.jsx)(Qe.Z,{style:{color:"#757575"}}),(0,e.jsx)("div",{className:"file-item-name",children:n.name}),(0,e.jsx)(de.Z,{onClick:function(h){je(h,n.key)},className:"file-item-delete"})]})},Ce=function(s,n,r,l){return(0,e.jsxs)("div",{className:"file-item2",children:[(0,e.jsx)("div",{className:"file-item2-picture",children:n.thumbUrl?(0,e.jsx)("img",{src:n.thumbUrl}):(0,e.jsx)("div",{className:"file-item2-file-name",children:(0,e.jsx)("div",{children:n.name.split(".")[n.name.split(".").length-1]})})}),(0,e.jsxs)("div",{className:"file-item-middleinfo",children:[(0,e.jsx)("div",{className:"file-item2-name",children:n.name}),n.hasOwnProperty("hash")&&(0,e.jsx)(Ye.Z,{trailColor:"#fff",percent:n.percent||0,status:n.progressStatus||"active"})]}),n.hasOwnProperty("hash")&&n.percent!=100&&(0,e.jsxs)(e.Fragment,{children:[n.stop&&(0,e.jsx)(We.Z,{onClick:function(h){ye(h,n.key)},className:"file-item2-delete"}),!n.stop&&(0,e.jsx)(Xe.Z,{onClick:function(h){ye(h,n.key)},className:"file-item2-delete"})]}),(0,e.jsx)(de.Z,{onClick:function(h){je(h,n.key)},className:"file-item2-delete"})]})},mt=function(s){return new Promise(function(n,r){var l=new FileReader;l.readAsDataURL(s),l.onload=function(){return n(l.result)},l.onerror=function(u){return r(u)}})},ft=function(){var f=X()(R()().mark(function s(n){return R()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!n.url&&!n.preview)){l.next=4;break}return l.next=3,mt(n.originFileObj);case 3:n.preview=l.sent;case 4:lt(n.url||n.preview),fe(!0),ut(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return l.stop()}},s)}));return function(n){return f.apply(this,arguments)}}(),vt=(0,e.jsxs)("div",{children:[(0,e.jsx)(Y.Z,{style:{color:"#304EEB",fontSize:"18px"}}),(0,e.jsx)("div",{style:{marginTop:8},children:"\u4E0A\u4F20\u56FE\u7247"})]});return(0,e.jsxs)(e.Fragment,{children:[F=="dragger"&&(0,e.jsx)("div",{className:"file-upload-dragger",children:(0,e.jsx)(qe,{itemRender:Ce,listType:d,accept:c,name:"file",data:{bucketName:"sasac"},action:J,maxCount:D,multiple:O,disabled:$,fileList:m,beforeUpload:K,onChange:_,children:(0,e.jsxs)("div",{className:"dragger-btn",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:"\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u533A\u57DF\uFF0C\u6216"}),(0,e.jsx)("span",{className:"click-upload",children:"\u70B9\u51FB\u4E0A\u4F20"})]}),c&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",c]})]})})}),F=="normal"&&(0,e.jsxs)("div",{className:"file-upload",children:[d=="text"&&(0,e.jsxs)(V.Z,{itemRender:ht,accept:c,name:"file",data:{bucketName:"sasac"},action:J,listType:d,maxCount:D,multiple:O,disabled:$,fileList:m,beforeUpload:K,onChange:_,children:[(0,e.jsx)(P.ZP,{icon:(0,e.jsx)(Y.Z,{}),children:"\u4E0A\u4F20\u6587\u4EF6"}),c&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",c]})]}),d=="picture"&&(0,e.jsxs)(V.Z,{itemRender:Ce,accept:c,name:"file",data:{bucketName:"sasac"},action:J,listType:d,maxCount:D,multiple:O,disabled:$,fileList:m,beforeUpload:K,children:[(0,e.jsx)(P.ZP,{icon:(0,e.jsx)(Y.Z,{}),children:"\u4E0A\u4F20\u6587\u4EF6"}),c&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",c]})]}),d=="picture-card"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{accept:c,name:"file",data:{bucketName:"sasac"},action:J,listType:d,maxCount:D,multiple:O,disabled:$,fileList:m,onPreview:ft,beforeUpload:K,onChange:_,children:j.length>=D?null:vt}),c&&(0,e.jsxs)("div",{className:"file-upload-accept",children:["\u652F\u6301\u6269\u5C55\u540D\uFF1A",c]}),(0,e.jsx)(ie.Z,{visible:nt,title:it,footer:null,onCancel:function(){fe(!1)},children:(0,e.jsx)("img",{alt:"example",style:{width:"100%"},src:rt})})]})]})]})},et=_e}}]);
